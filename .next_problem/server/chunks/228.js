exports.id=228,exports.ids=[228],exports.modules={90092:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,79404,23)),Promise.resolve().then(t.bind(t,67002))},71821:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},71709:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},31215:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},40765:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])},63685:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(76557).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},67002:(e,s,t)=>{"use strict";t.d(s,{ProductForm:()=>v});var r=t(10326),a=t(17577),l=t(35047),i=t(91664),d=t(41190),n=t(82015),o=t(44794),c=t(29280),m=t(38443),u=t(1972),x=t(40765),h=t(71821),p=t(71709),g=t(94019),f=t(63685),b=t(31215),j=t(69701),y=t(40381);function v({vendorId:e,product:s,isEditing:t=!1}){let v=(0,l.useRouter)(),[N,w]=(0,a.useState)(!1),[k,P]=(0,a.useState)(!1),[C,Z]=(0,a.useState)({}),[S,_]=(0,a.useState)(new Set),[O,U]=(0,a.useState)([]),[z,F]=(0,a.useState)({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[I,q]=(0,a.useState)({name:s?.name||"",description:s?.description||"",price:s?.price?.toString()||"",sku:s?.sku||"",status:s?.status||"draft",category_id:s?.category_id||"none"}),[L,D]=(0,a.useState)([]),[H,E]=(0,a.useState)(s?.product_images||[]),M=async r=>{r.preventDefault(),w(!0);try{let r;let a=(0,j.e)(),l={vendor_id:e,name:I.name,description:I.description||null,price:I.price?parseFloat(I.price):null,sku:I.sku||null,status:I.status,category_id:I.category_id&&"none"!==I.category_id?I.category_id:null};if(t&&s){let{data:e,error:t}=await a.from("products").update(l).eq("id",s.id).select().single();if(t)throw t;r=e.id}else{let{data:e,error:s}=await a.from("products").insert(l).select().single();if(s)throw s;r=e.id}L.length>0&&await $(r),y.ZP.success(t?"Product updated successfully!":"Product created successfully!"),v.push("/dashboard/products"),v.refresh()}catch(e){console.error("Error saving product:",e),y.ZP.error("Error saving product. Please try again.")}finally{w(!1)}},$=async e=>{P(!0);try{for(let s=0;s<L.length;s++){let t=L[s],r=`${t.name}-${t.size}-${t.lastModified}`;Z(e=>({...e,[r]:0}));let a=new FormData;a.append("file",t),a.append("productId",e),a.append("displayOrder",(H.length+s).toString());let l=await fetch("/api/upload",{method:"POST",body:a});if(!l.ok){let e=await l.json();throw Error(e.error||"Failed to upload image")}let i=await l.json();Z(e=>({...e,[r]:100})),console.log("Image uploaded successfully:",i)}}finally{P(!1),Z({})}},R=e=>{D(L.filter((s,t)=>t!==e))};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-8 mb-8",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary text-primary-foreground font-semibold text-sm",children:"1"}),r.jsx("span",{className:"text-body-sm font-medium text-foreground",children:"Basic Info"})]}),r.jsx("div",{className:"h-px bg-border flex-1 max-w-16"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary text-primary-foreground font-semibold text-sm",children:"2"}),r.jsx("span",{className:"text-body-sm font-medium text-foreground",children:"Images"})]})]}),(0,r.jsxs)("form",{onSubmit:M,className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-chart-1/10 text-chart-1",children:r.jsx(x.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-heading-lg font-semibold text-foreground",children:"Basic Information"}),r.jsx("p",{className:"text-body-sm text-muted-foreground",children:"Essential details about your product"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"name",className:"text-label-lg font-medium text-foreground",children:"Product Name *"}),r.jsx(d.I,{id:"name",value:I.name,onChange:e=>q(s=>({...s,name:e.target.value})),placeholder:"Enter a descriptive product name",required:!0,maxLength:255,className:"h-11"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"sku",className:"text-label-lg font-medium text-foreground",children:"SKU (Stock Keeping Unit)"}),r.jsx(d.I,{id:"sku",value:I.sku,onChange:e=>q(s=>({...s,sku:e.target.value})),placeholder:"e.g. PROD-001",maxLength:100,className:"h-11"}),r.jsx("p",{className:"text-label-sm text-muted-foreground",children:"Optional unique identifier for inventory tracking"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"description",className:"text-label-lg font-medium text-foreground",children:"Product Description"}),r.jsx(n.g,{id:"description",value:I.description,onChange:e=>q(s=>({...s,description:e.target.value})),placeholder:"Provide a detailed description of your product, including features, benefits, and specifications...",rows:5,maxLength:1e3,className:"resize-none"}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("p",{className:"text-label-sm text-muted-foreground",children:"Help customers understand what makes your product special"}),(0,r.jsxs)("span",{className:"text-label-sm text-muted-foreground",children:[I.description.length,"/1000"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"price",className:"text-label-lg font-medium text-foreground",children:"Price"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx(h.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(d.I,{id:"price",type:"number",step:"0.01",min:"0",value:I.price,onChange:e=>q(s=>({...s,price:e.target.value})),placeholder:"0.00",className:"pl-10 h-11"})]}),r.jsx("p",{className:"text-label-sm text-muted-foreground",children:"Leave empty if price varies or on request"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"category",className:"text-label-lg font-medium text-foreground",children:"Category"}),(0,r.jsxs)(c.Ph,{value:I.category_id,onValueChange:e=>q(s=>({...s,category_id:e})),children:[r.jsx(c.i4,{className:"h-11",children:r.jsx(c.ki,{placeholder:"Choose a category"})}),(0,r.jsxs)(c.Bw,{children:[r.jsx(c.Ql,{value:"none",children:"No Category"}),O.map(e=>r.jsx(c.Ql,{value:e.id,children:e.name},e.id))]})]}),r.jsx("p",{className:"text-label-sm text-muted-foreground",children:"Helps organize your catalog"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(o._,{htmlFor:"status",className:"text-label-lg font-medium text-foreground",children:"Visibility Status"}),(0,r.jsxs)(c.Ph,{value:I.status,onValueChange:e=>q(s=>({...s,status:e})),children:[r.jsx(c.i4,{className:"h-11",children:r.jsx(c.ki,{placeholder:"Select status"})}),(0,r.jsxs)(c.Bw,{children:[r.jsx(c.Ql,{value:"draft",children:"Draft (Hidden)"}),r.jsx(c.Ql,{value:"active",children:"Active (Visible)"}),r.jsx(c.Ql,{value:"inactive",children:"Inactive (Hidden)"})]})]}),r.jsx("p",{className:"text-label-sm text-muted-foreground",children:"Controls public visibility"})]})]})]}),(0,r.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-chart-2/10 text-chart-2",children:r.jsx(p.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-heading-lg font-semibold text-foreground",children:"Product Images"}),r.jsx("p",{className:"text-body-sm text-muted-foreground",children:"Upload high-quality images to showcase your product"})]}),r.jsx("div",{className:"ml-auto",children:(0,r.jsxs)(m.C,{variant:"outline",className:"text-label-sm",children:[L.length+H.length,"/10"]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[H.map((e,s)=>{let t=S.has(e.id);return(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)("div",{className:"aspect-square bg-muted/20 rounded-xl overflow-hidden border border-border hover:border-primary/50 transition-colors",children:[r.jsx("img",{src:e.url,alt:e.alt_text,className:"w-full h-full object-cover"}),t&&r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-white text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-white border-t-transparent mx-auto mb-2"}),r.jsx("div",{className:"text-label-sm",children:"Deleting..."})]})})]}),r.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-destructive hover:bg-destructive/90 text-destructive-foreground rounded-lg p-1.5 opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-lg",disabled:t,onClick:()=>{F({isOpen:!0,title:"Delete Image",message:"Are you sure you want to delete this image? This action cannot be undone.",onConfirm:async()=>{if(F(e=>({...e,isOpen:!1})),e.id){_(s=>new Set(s).add(e.id));try{let t=await fetch(`/api/upload/${e.id}`,{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete image")}E(H.filter((e,t)=>t!==s)),y.ZP.success("Image deleted successfully")}catch(e){console.error("Error deleting image:",e),y.ZP.error(`Failed to delete image: ${e?.message||"Unknown error"}`)}finally{_(s=>{let t=new Set(s);return t.delete(e.id),t})}}}})},children:r.jsx(g.Z,{className:"h-3 w-3"})}),0===s&&r.jsx(m.C,{className:"absolute bottom-2 left-2 text-xs bg-primary text-primary-foreground",children:"Primary"})]},`existing-${s}`)}),L.map((e,s)=>{let t=C[`${e.name}-${e.size}-${e.lastModified}`],a=k&&void 0!==t;return(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)("div",{className:"aspect-square bg-muted/20 rounded-xl overflow-hidden border-2 border-dashed border-chart-2/30",children:[r.jsx("img",{src:URL.createObjectURL(e),alt:e.name,className:"w-full h-full object-cover"}),a&&r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-white text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-white border-t-transparent mx-auto mb-2"}),r.jsx("div",{className:"text-label-sm",children:100===t?"Complete!":"Uploading..."})]})})]}),r.jsx("button",{type:"button",className:"absolute top-2 right-2 bg-destructive hover:bg-destructive/90 text-destructive-foreground rounded-lg p-1.5 opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-lg",onClick:()=>R(s),disabled:a,children:r.jsx(g.Z,{className:"h-3 w-3"})}),0===s&&0===H.length&&r.jsx(m.C,{className:"absolute bottom-2 left-2 text-xs bg-primary text-primary-foreground",children:"Primary"})]},`new-${s}`)}),L.length+H.length<10&&(0,r.jsxs)("label",{className:"aspect-square border-2 border-dashed border-border hover:border-primary/50 rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all duration-200 hover:bg-primary/5 group",children:[r.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10 text-primary group-hover:bg-primary/20 transition-colors mb-3",children:r.jsx(f.Z,{className:"h-6 w-6"})}),r.jsx("span",{className:"text-body-sm font-medium text-foreground mb-1",children:"Upload Images"}),r.jsx("span",{className:"text-label-sm text-muted-foreground",children:"JPG, PNG up to 10MB"}),r.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{D([...L,...Array.from(e.target.files||[])])},className:"hidden"})]})]}),r.jsx("div",{className:"bg-muted/30 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-info/20 text-info mt-0.5",children:r.jsx(p.Z,{className:"h-3 w-3"})}),(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-body-sm font-medium text-foreground",children:"Image Guidelines"}),(0,r.jsxs)("ul",{className:"text-label-sm text-muted-foreground space-y-0.5",children:[r.jsx("li",{children:"• Upload up to 10 high-quality images"}),r.jsx("li",{children:"• First image becomes the primary thumbnail"}),r.jsx("li",{children:"• Recommended size: 1200x1200 pixels"}),r.jsx("li",{children:"• Supported formats: JPG, PNG (max 10MB each)"})]})]})]})})]}),(0,r.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-4",children:[r.jsx(i.z,{type:"button",variant:"outline",size:"lg",onClick:()=>v.back(),disabled:N,className:"order-2 sm:order-1",children:"Cancel"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 order-1 sm:order-2",children:[!t&&r.jsx(i.z,{type:"button",variant:"outline",size:"lg",onClick:()=>q(e=>({...e,status:"draft"})),disabled:N,children:"Save as Draft"}),r.jsx(i.z,{type:"submit",size:"lg",variant:"gradient",disabled:N||k||!I.name.trim(),className:"min-w-[140px]",children:N||k?(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),k?"Uploading...":t?"Updating...":"Creating..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(b.Z,{className:"h-4 w-4 mr-2"}),t?"Update Product":"Create Product"]})})]})]}),(N||k)&&(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-label-sm text-muted-foreground",children:[r.jsx("span",{children:k?"Uploading images...":t?"Updating product...":"Creating product..."}),r.jsx("span",{children:"Please wait"})]}),r.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:r.jsx("div",{className:"bg-primary h-1.5 rounded-full transition-all duration-300 animate-pulse",style:{width:"70%"}})})]})]}),r.jsx(u.U,{isOpen:z.isOpen,onClose:()=>F(e=>({...e,isOpen:!1})),onConfirm:z.onConfirm,title:z.title,message:z.message,confirmText:"Delete",type:"danger"})]})]})}},44794:(e,s,t)=>{"use strict";t.d(s,{_:()=>n});var r=t(10326),a=t(17577),l=t(79360),i=t(51223);let d=(0,l.j)("text-label-lg font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-foreground"),n=a.forwardRef(({className:e,...s},t)=>r.jsx("label",{ref:t,className:(0,i.cn)(d(),e),...s}));n.displayName="Label"},82015:(e,s,t)=>{"use strict";t.d(s,{g:()=>i});var r=t(10326),a=t(17577),l=t(51223);let i=a.forwardRef(({className:e,...s},t)=>r.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-input-bg px-3 py-2 text-body-sm text-foreground ring-offset-background transition-all duration-200 placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:border-primary hover:border-ring disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-muted resize-y",e),ref:t,...s}));i.displayName="Textarea"},39755:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(36478).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},56630:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(19510),a=t(98075),l=t(93804),i=t(94443);function d(){return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(i.O,{className:"h-8 w-48"}),r.jsx(i.O,{className:"h-4 w-64"})]}),r.jsx(i.O,{className:"h-10 w-32"})]}),r.jsx(l.Zb,{children:r.jsx(l.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx(i.O,{className:"h-10 flex-1"}),r.jsx(i.O,{className:"h-10 w-32"}),r.jsx(i.O,{className:"h-10 w-32"})]})})}),r.jsx(a.L4,{})]})}},75745:(e,s,t)=>{"use strict";t.d(s,{H:()=>r});let r=(0,t(68570).createProxy)(String.raw`/Users/ayodelebabafemi/Projects/easybuilder/src/components/dashboard/product-form.tsx#ProductForm`)}};